<section id="messages" layout-fill layout="vertical" flex>
  <header>
    <h1>#{{channel.name}}</h1>
  </header>
  <div flex class="scroll-vertical" scroll-glue>
    <ul>
      <li ng-repeat="message in channel.messages">
        <span ng-if="message.default">
          <em>
            <small ng-bind-html="message.text | highlighWords"></small>
          </em>
        </span>
        <span ng-if="!message.default" class="user-message" ng-id="id{{message.$id}}">
          <div class="meta">
            <img class="avatar"
              ng-src="{{message.user.email | gravatarHash}}"
              alt="{{message.user.name}}"
              height="32px" width="32px">
            <span class="username">{{message.user.name}}</span>
            <span class="timestamp">{{message.timestamp|parseDate|date:'hh:mm a'}}</span>
          </div>
          <span class="message" ng-bind-html="message.text | highlighWords"></span>
        </span>
      </li>
    </ul>
  </div>
  <div class="pad-10">
    <form ng-submit="channel.addMessage()">
      <input type="text" class="form-control" mentio-id="'channelMessage'"
        mentio mentio-typed-text="typedTerm"
        mentio-items="channel.prompt | filter:typedTerm"
        mentio-template-url="/people-mentions.tpl"
        ng-model="channel.newMessage" placeholder="new message">
    </form>
  </div>
</section>
